<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Star Catcher Adventure Pro</title>
<style>
    body { margin: 0; background: #87ceeb; font-family: Arial; overflow: hidden; }
    canvas { display: block; margin: auto; background: #87ceeb; border: 3px solid #333; border-radius: 10px; }
    #scoreboard {
        position: absolute; top: 10px; width: 100%; display: flex; justify-content: space-between;
        padding: 0 20px; font-size: 24px; color: #fff;
    }
</style>
</head>
<body>
<div id="scoreboard">
    <div id="score">Score: 0</div>
    <div id="level">Level: 1</div>
    <div id="highscore">High Score: 0</div>
</div>
<canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
// Canvas setup
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// Game variables
let score = 0;
let level = 1;
let highScore = localStorage.getItem('highScore') || 0;

// Player
const playerImg = new Image();
playerImg.src = 'https://i.imgur.com/jRfR4DG.png'; // simple kid-friendly character
let player = { x: 180, y: 520, width: 60, height: 60, speed: 7 };

// Objects
let objects = [];
let objectSpeed = 3;

// Power-ups
let powerUps = [];

// Controls
let keys = {};
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Sounds
const catchSound = new Audio('https://freesound.org/data/previews/320/320181_5260872-lq.mp3');
const bombSound = new Audio('https://freesound.org/data/previews/331/331912_3248244-lq.mp3');
const powerSound = new Audio('https://freesound.org/data/previews/341/341695_6249913-lq.mp3');

// Spawn objects
function spawnObject() {
    const x = Math.random() * (canvas.width - 30);
    let typeChance = Math.random();
    let type = 'star';
    if (typeChance < 0.1) type = 'bomb';
    else if (typeChance < 0.25) type = 'coin';
    else if (typeChance < 0.3) type = 'power';
    objects.push({ x: x, y: 0, width: 30, height: 30, type: type });
}

// Update game
function update() {
    // Move player
    if (keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
    if (keys['ArrowRight'] && player.x + player.width < canvas.width) player.x += player.speed;

    // Move objects
    for (let i = objects.length - 1; i >= 0; i--) {
        objects[i].y += objectSpeed;

        // Collision
        if (
            objects[i].x < player.x + player.width &&
            objects[i].x + objects[i].width > player.x &&
            objects[i].y < player.y + player.height &&
            objects[i].y + objects[i].height > player.y
        ) {
            switch(objects[i].type) {
                case 'star':
                    score += 1; catchSound.play(); break;
                case 'coin':
                    score += 5; catchSound.play(); break;
                case 'bomb':
                    score -= 5; bombSound.play(); break;
                case 'power':
                    score += 10; powerSound.play(); break;
            }
            objects.splice(i, 1);
        } else if (objects[i].y > canvas.height) {
            objects.splice(i, 1);
        }
    }

    // Increase level
    level = Math.floor(score / 20) + 1;
    objectSpeed = 3 + level * 0.5;

    // Update high score
    if (score > highScore) {
        highScore = score;
        localStorage.setItem('highScore', highScore);
    }

    // Update display
    document.getElementById('score').innerText = `Score: ${Math.max(score,0)}`;
    document.getElementById('level').innerText = `Level: ${level}`;
    document.getElementById('highscore').innerText = `High Score: ${highScore}`;

    draw();
}

// Draw everything
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw player
    ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);

    // Draw objects
    objects.forEach(obj => {
        switch(obj.type) {
            case 'star': ctx.fillStyle = '#ffff00'; break;
            case 'coin': ctx.fillStyle = '#ffd700'; break;
            case 'bomb': ctx.fillStyle = '#ff0000'; break;
            case 'power': ctx.fillStyle = '#00ff00'; break;
        }
        ctx.beginPath();
        ctx.arc(obj.x + obj.width/2, obj.y + obj.height/2, obj.width/2, 0, Math.PI*2);
        ctx.fill();
    });
}

// Game loop
function gameLoop() {
    if (Math.random() < 0.06 + level*0.004) spawnObject();
    update();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
